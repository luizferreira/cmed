<html metal:use-macro="here/main_template/macros/master" i18n:domain="cmfuemr"
    tal:define="portal_url context/getPortalURL">
    <metal:block fill-slot="javascript_head_slot">
        <script type="text/javascript" tal:attributes="src string:$portal_url/portal_skins/wres_theme_auxiliary/transcriptionist_desktop_aux/transcriptionist.js"></script>
    </metal:block>
    <metal:block fill-slot="css_slot">
        <style type="text/css" media="all" tal:content="string:@import url(${portal_url}/visual.css);"></style>
    </metal:block>
    <body>
    <<!--div metal:fill-slot="main"
		tal:define="current_key request/key | string:recently_seen">
        <br />
        <div class="center pagetitle" i18n:translate="description_transcriptionist_desktop">Transcriptionist Desktop</div>
        <br />
        <table class="whole_tab collapse width-100">
            <tr id="bar_tr">
                <td id="encounters_td" class="single_tab green center width-25"
                	tal:define="is_selected python:current_key == 'recently_seen';
                				bla python:is_selected and 'green ' or ''"
                	tal:attributes="class string:single_tab ${bla} center width-25">
                    <a href="javascript:void(0)" onclick="select_bar('recently_seen', 'desktop_data', 'encounters_td', 'bar_tr')"
					i18n:translate="label_encounters">Encounters</a>
                </td>
                <td id="drafts_td" class="single_tab center width-25"
                	tal:define="is_selected python:current_key == 'drafts';
                				bla python:is_selected and 'green ' or ''"
                	tal:attributes="class string:single_tab ${bla} center width-25">
                    <a href="javascript:void(0)" onclick="select_bar('drafts_div', 'desktop_data', 'drafts_td', 'bar_tr')"
					i18n:translate="label_drafts">Drafts</a>
                </td>
                <td id="inbox_td" class="single_tab center width-25"
                	tal:define="is_selected python:current_key == 'inbox';
                				bla python:is_selected and 'green ' or ''"
                	tal:attributes="class string:single_tab ${bla} center width-25">
                    <a href="javascript:void(0)" onclick="select_bar('inbox_div', 'desktop_data', 'inbox_td', 'bar_tr')"
					i18n:translate="label_pending_review_inbox">Pending Review: Inbox</a>
                </td>
                <td id="sent_td" class="single_tab center width-25"
                	tal:define="is_selected python:current_key == 'sent';
                				bla python:is_selected and 'green ' or ''"
                	tal:attributes="class string:single_tab ${bla} center width-25">
                    <a href="javascript:void(0)" onclick="select_bar('sent_div', 'desktop_data', 'sent_td', 'bar_tr')"
					i18n:translate="label_pending_review_sent">Pending Review: Sent</a>
                </td>
            </tr>
        </table>
        
        <div id="desktop_data"
        	tal:define="all_encounters context/transcriptionist_desktop_aux/getEncountersData;">
            <span id="recently_seen"
            	tal:define="options context/transcriptionist_desktop_aux/getSelectOptionsData"
            	tal:attributes="style python:current_key == 'recently_seen' or 'display: none'">
               <h1 i18n:translate="heading_pending_encounters">Pending Encounters</h1><br />
               <tal:div tal:define="encounters all_encounters/pending; pending python:True">
                   <metal:done use-macro="here/transcriptionist_desktop_aux/transcriptionist_desktop_macros/macros/encounters_table"/>
               </tal:div><br />
               <h1 i18n:translate="done_encounters">Done Encounters</h1><br />
               <tal:div tal:define="encounters all_encounters/done; pending python:False">
                   <metal:done use-macro="here/transcriptionist_desktop_aux/transcriptionist_desktop_macros/macros/encounters_table"/>
               </tal:div>
            </span>
            <span id="drafts_div"  style="display: none"
            	tal:define="mid context/transcriptionist_desktop_aux/getDocumentsData;
                            docs mid/drafts;
                            type string:drafts"
            	tal:attributes="style python:current_key == 'drafts' or 'display: none'">
                <h1 i18n:translate="heading_drafts">Drafts</h1><br />
                <metal:table use-macro="context/transcriptionist_desktop_aux/transcriptionist_desktop_macros/macros/doctable" />
            </span>
            <span id="inbox_div"  style="display: none"
            	tal:define="mid context/transcriptionist_desktop_aux/getDocumentsData; 
                            docs mid/inbox;
                            type string:inbox"- #TODO EXCLUIR->
                  tal:attributes="style python:current_key == 'inbox' or 'display: none'">
                <h1 i18n:translate="heading_inbox">Inbox</h1><br />
                <metal:table use-macro="context/transcriptionist_desktop_aux/transcriptionist_desktop_macros/macros/doctable"/>
            </span>
            <span id="sent_div"  style="display: none"
                tal:define="mid context/transcriptionist_desktop_aux/getDocumentsData; 
	                        docs mid/sent;
                            type string:sent"
                  tal:attributes="style python:current_key == 'sent' or 'display: none'">
                <h1 i18n:translate="heading_sent">Sent</h1><br />
                <metal:table use-macro="context/transcriptionist_desktop_aux/transcriptionist_desktop_macros/macros/doctable"/>
            </span>
        </div>
    </div>
    </body>
</html>
