<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="cmfuemr">

<head>
	<title>Alergias e Imunizações</title>

	<metal:block fill-slot="style_slot">
		<link rel="stylesheet" type="text/css" href="cmed.css" />
        <!--link rel="stylesheet" type="text/css" href="prescriptions.css" /-->
	</metal:block>

</head>


<metal:main fill-slot="main" tal:define="immunizations_data context/getShowImmunizationsData;
										 immunizations immunizations_data/immunizations;
										 allergies context/getAllAllergies">

	<!-- Alergias -->
	<fieldset class="cmed" id="allergies">
		<legend i18n:translate="cmfuemr_description_allergies">Allergies</legend>

        <tal:if condition="not:allergies">
        	<span style="font-style:italic"> Não há alergias. </span>
        </tal:if>

        <tal:if condition="allergies">		
			<table class="listing">
				<thead>
					<th></th>
					<th>Alérgico a</th>
					<th i18n:translate="cmfuemr_listingheader_reaction">Reaction</th>
				</thead>
				<tbody>
					<tal:loop tal:repeat="allergy allergies">
						<tr tal:attributes="class python:test(repeat['allergy'].even(), 'even', 'odd')">
							<td tal:content="repeat/allergy/number">1</td>
							<td>
			                    <tal:t content="allergy/allergy" i18n:translate="">Penicillin</tal:t>
			                    <tal:t condition="allergy/not_signed">*</tal:t>
							</td>
							<td i18n:translate="" tal:content="allergy/reaction" >death</td>
						</tr>
					</tal:loop>
				</tbody>
			</table>
			<span> * Não assinado. </span>
		</tal:if>
	</fieldset>


	<!-- Imunizacoes -->
    <fieldset class="cmed" id="immunizations">
        <legend i18n:translate="cmfuemr_text_immunizations">Immunizations</legend>

        <tal:if condition="not:immunizations">
        	<span style="font-style:italic"> Não há imunizações. </span>
        </tal:if>

        <tal:if condition="immunizations">
	        <table class="listing">
	            <thead>
	            <th></th>
	            <th i18n:translate="cmfuemr_text_year">Year</th>
	            <th i18n:translate="cmfuemr_text_immunization">Immunization</th>
	            </thead>
	            <tbody>
	                <tr tal:repeat="immunization immunizations" 
	                    tal:attributes="class python:test(repeat['immunization'].even(), 'even', 'odd')">
	                    <td tal:content="repeat/immunization/number"></td>
	                    <td tal:content="immunization/year"></td>
	                    <td tal:content="immunization/id"></td>
	                </tr>
	            </tbody>
	        </table>
	        <span> * Não assinado. </span>
        </tal:if>
    </fieldset>	

</metal:main>
</html>