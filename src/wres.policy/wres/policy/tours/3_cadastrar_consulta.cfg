[amberjack]
steps =
    acessar_calendario
    selecionar_horario

title = Como cadastrar uma Consulta.

[acessar_calendario]
blueprint = collective.amberjack.blueprints.step
text = 
title = Acesse a seção do Calendário
url = aj_any_url
microsteps =
    microstep_0_0
    microstep_0_1
    microstep_0_2
    
[microstep_0_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'milliseconds':0}
method = waits.sleep
description = Se você não deseja realizar cada passo da tarefa, clique na seta ao lado de cada operação para que ela seja realizada automaticamente pelo seu navegador.

[microstep_0_1]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'milliseconds':0}
method = waits.sleep
description = Certifique-se que você está <b>logado como médico ou como secretária</b> para iniciar esta tarefa.

[microstep_0_2]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'xpath':'//*[@id="portaltab-calendar"]/a'}
method = click
description = Clique na aba "Calendario".

[selecionar_horario]
blueprint = collective.amberjack.blueprints.step
text = 
title = Selecionar o Horário da Consulta
url = aj_any_url
microsteps =
    microstep_1_0
    microstep_1_1
    microstep_1_2
    microstep_1_3
    microstep_1_4
    microstep_1_5
    microstep_1_6
    microstep_1_7
    microstep_1_8

[microstep_1_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'timeout' : "20000"}
method = waits.forPageLoad
description = Para criar uma consulta, primeiramente escolhemos sua data (colunas) e seu horário(linhas). Neste caso criaremos uma consulta na Terça-Feira das 14h ás 15h.<b> Clique, arraste e solte</b> no calendário de acordo com a data e horário citados.

[microstep_1_1]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'timeout' : "40000"}
selector = {'id':'popup_search_patient'}
method = waits.forElement
description = Observe que podemos registrar um paciente rapidamente atráves do botão registro rápido.

[microstep_1_2]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'id':'popup_search_patient'}
method = click
description = Clique no botão "Procurar" para abrir uma janela de busca. Digite o nome de um paciente já criado e aperte enter. Se você seguiu algum tutorial de cadastro de paciente, procure por "Jose Antonio".
condition = checkstep

[microstep_1_3]
blueprint = collective.amberjack.blueprints.windmillmicrostep
method = highlight
selector = {'id':'duration'}
description = Confira os dados da consulta pelos campos "Inicio da Consulta" e "Duração".

[microstep_1_4]
blueprint = collective.amberjack.blueprints.windmillmicrostep
method = highlight
selector = {'id':'archetypes-fieldname-contactPhone'}
description = Confira o telefone do paciente no campo "Telefone de Contato". Você pode alterá-lo caso necessário.

[microstep_1_5]
blueprint = collective.amberjack.blueprints.windmillmicrostep
method = highlight
selector = {'id':'archetypes-fieldname-visit_type'}
description = Escolha se o tipo da consulta será 1ª Consulta, Consulta ou Retorno no campo "Tipo de Consulta".

[microstep_1_6]
blueprint = collective.amberjack.blueprints.windmillmicrostep
method = highlight
selector = {'id':'archetypes-fieldname-visit_reason'}
description = No campo da "Razão da consulta", escolha Acompanhamento, Check up ou Outros (para inserir outros novas opções).

[microstep_1_7]
blueprint = collective.amberjack.blueprints.windmillmicrostep
method = highlight
selector = {'id':'archetypes-fieldname-insurance'}
description = No campo da "Plano de Saúde", escolha o plano do paciente. No item Outros você pode inserir novas opções.

[microstep_1_8]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':'form.button.save'}
method = click
description = Clique no botão "Salvar" para finalizar a criação da consulta.
condition = checkstep