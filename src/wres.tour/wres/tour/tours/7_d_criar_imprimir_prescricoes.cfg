[amberjack]
steps =
    acesse_o_prontuario_de_um_paciente
    procurar_paciente
    item_medicamentos_e_prescricoes
    adicionar_medicamentos1
    adicionar_medicamentos2
    gerar_prescricao
    confirmar_prescricao
    parabens

title = Gerando e imprimindo prescricoes.

[acesse_o_prontuario_de_um_paciente]
blueprint = collective.amberjack.blueprints.step
text = 
title = Acesse a seção do Pacientes
url = aj_any_url
microsteps =
    microstep_0_0
    microstep_0_1
    
[microstep_0_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'milliseconds':0}
method = waits.sleep
description = Se você não deseja realizar cada passo da tarefa, clique na seta ao lado de cada operação para que ela seja realizada automaticamente pelo seu navegador.

[microstep_0_1]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'xpath':'//*[@id="portaltab-Patients"]/a'}
method = click
description = Clique na aba "Pacientes".
condition = checkstep

[procurar_paciente]
blueprint = collective.amberjack.blueprints.step
text = 
title = Procure o paciente.
url = aj_any_url
microsteps =
    microstep_1_1
    microstep_1_2
    microstep_1_3
    microstep_1_5
    
[microstep_1_1]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'xpath':'//*[@id="livesearch0"]/div'}
method = click
description = Clique na <b>caixa de pesquisa no canto superior direito</b> em destaque.

[microstep_1_2]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'milliseconds':0}
method = waits.sleep
description = Escreva o nome ou o sobrenome de um paciente já cadastrado.

[microstep_1_3]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'milliseconds':0}
method = waits.sleep
description = Clique no link <b>Pessoal</b> logo ao lado do número do telefone de contato do paciente.

[microstep_1_5]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'timeout' : "20000"}
method = waits.forPageLoad
description = 

[item_medicamentos_e_prescricoes]
blueprint = collective.amberjack.blueprints.step
text = 
title = Acesse o item Medicamentos e prescricoes.
url = aj_any_url
microsteps =
    microstep_2_0

[microstep_2_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'id':'navigation_medicamentos'}
method = click
description = Clique no item <b>Medicamentos e Prescrições</b> do menu a esquerda.

[adicionar_medicamentos1]
blueprint = collective.amberjack.blueprints.step
text = 
title = Adicione medicamentos.
url = aj_any_url
microsteps =
    microstep_3_0
    microstep_3_1
    microstep_3_2
    microstep_3_3
    microstep_3_4
    microstep_3_5
    microstep_3_6

[microstep_3_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'milliseconds':0}
method = waits.sleep
description = Esta página é utilizada para gerar prescrições de medicamentos para o paciente. Assim como observar o histórico de medicamentos e o histórico de prescrições.

[microstep_3_1]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'text':"Aspirina Efervescente"}
selector = {'name':'medication'}
method = type
description = Vamos adicionar o <b>medicamento</b> Aspirina Efervescente. Observe que este campo se auto-complementa com praticamente todos os medicamentos existentes no mercado brasileiro.

[microstep_3_2]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':"concentration"}
text = {'text':"500mg"}
method = type
description = Colocaremos uma <b>concentração</b> de 500 mg.

[microstep_3_3]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':"quantity"}
text = {'text':"2 comprimidos"}
method = type
description = Uma <b>quantidade</b> de 2 comprimidos.

[microstep_3_4]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':"use"}
text = {'text':"Oral"}
method = type
description = O <b>uso</b> Oral.

[microstep_3_5]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':"status"}
method = highlight
description = O <b>estado</b> possui duas opções, "Historico" para caso deseje cadastrar antigos medicamentos que o paciente ja tomou sem prescreve-los. Mas no nosso caso prescreveremos o medicamento, então selecione a opção "Prescrito".

[microstep_3_6]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'id':"add_new"}
method = click
description = Clique em <b>adicionar medicamento</b>.

[adicionar_medicamentos2]
blueprint = collective.amberjack.blueprints.step
text = 
title = Adicione outro medicamentos.
url = aj_any_url
microsteps =
    microstep_4_0
    microstep_4_1
    microstep_4_2
    microstep_4_3
    microstep_4_4
    microstep_4_5

[microstep_4_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'text':"Dorflex"}
selector = {'name':'medication'}
method = type
description = Vamos agora adicionar o <b>medicamento</b> Dorflex. Observe que este campo se auto-complementa com praticamente todos os medicamentos existentes no mercado brasileiro.

[microstep_4_1]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':"concentration"}
text = {'text':"300mg"}
method = type
description = Colocaremos uma <b>concentração</b> de 300 mg.

[microstep_4_2]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':"quantity"}
text = {'text':"40 comprimidos"}
method = type
description = Uma <b>quantidade</b> de 40 comprimidos.

[microstep_4_3]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':"use"}
text = {'text':"Oral"}
method = type
description = O <b>uso</b> Oral.

[microstep_4_4]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':"status"}
method = highlight
description = Selecione o <b>estado</b> "Prescrito".

[microstep_4_5]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'id':"add_new"}
method = click
description = Clique em <b>adicionar medicamento</b>.

[gerar_prescricao]
blueprint = collective.amberjack.blueprints.step
text = 
title = Gerar a prescição.
url = aj_any_url
microsteps =
    microstep_5_0
    microstep_5_1
    microstep_5_2

[microstep_5_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'milliseconds':0}
method = waits.sleep
description = Você pode observar na tabela <b>Medicamentos Atuais</b> todos os medicamentos adicionados. Você pode <b>edita-los</b> ou mesmo <b>inativa-los</b> em seus respectivos botões a direita. Caso inative um medicamento, o mesmo irá para a tabela <b>Histórico de Medicamentos</b>.

[microstep_5_1]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'xpath':'//*[@id="content"]/form/fieldset/table/thead/tr/th[2]'}
method = highlight
description = Agora, vamos gerar uma prescrição, selecione os medicamentos que você adicionou e que deseje prescrevê-los na coluna <b>Marcar</b> da tabela <b>Medicamentos Atuais</b>.

[microstep_5_2]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'name':'form.button.generate'}
method = click
description = Clique em <b>Gerar Prescrição</b>.

[confirmar_prescricao]
blueprint = collective.amberjack.blueprints.step
text = 
title = Confirmar a prescição.
url = aj_any_url
microsteps =
    microstep_6_0

[microstep_6_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'id': 'confirm'}
method = click
description = Observe se a data e os medicamentos estão corretos e confirme a prescrição.

[parabens]
blueprint = collective.amberjack.blueprints.step
text = 
title = Imprimir a prescição.
url = aj_any_url
microsteps =
    microstep_7_0
    microstep_7_1

[microstep_7_0]
blueprint = collective.amberjack.blueprints.windmillmicrostep
text = {'milliseconds':0}
method = waits.sleep
description = A prescrição foi criada com sucesso. Observe que há o link <b>imprimir</b> a direita.

[microstep_7_1]
blueprint = collective.amberjack.blueprints.windmillmicrostep
selector = {'id':'navigation_medicamentos'}
method = click
description = Clique em <b>Medicamentos e Prescrições</b> e observe que a prescrição criada já consta na tabela <b>Histórico de Prescrições</b>.
condition=checkstep